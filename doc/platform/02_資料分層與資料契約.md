# 資料分層與資料契約

本文件定義每一層的「必填欄位、允許行為、禁止行為」，用來確保後續指標計算與 Dashboard 可比較且可追溯。

## 1. Raw 原始層（只新增）
### Raw 必填欄位
- company_id：公司識別
- period_or_year：期間（季度/年度）
- source_ref：來源引用（連結/檔案識別/頁碼章節/事件 id）
- raw_payload_or_extract：原始內容（或摘要）
- unit/currency：原始單位/幣別（適用時）
- fingerprint：內容指紋
- version_no、created_at、created_by

### Raw 禁止行為
- 禁止更新/刪除
- 禁止補 0

## 2. Curated 標準化層（新增版本）
### 財報 Curated 必填
- currency_std、unit_std（統一幣別/單位）
- period_std（統一期間定義）
- account_mapping_version（科目映射版本）

### 永續 Curated 必填
- metric_code（指標代碼）
- unit_std（標準單位）
- conversion_rule_version（換算規則版本）
- boundary_note（口徑/邊界說明，必要時）

## 3. Mart 指標層（新增版本）
### Mart 必填
- metric_id、metric_name
- value（或缺原因）
- formula_version
- input_versions（使用的 Curated 版本清單）
- version_no、created_at

## 4. 缺資料處理
- 缺：顯示缺（並記錄缺原因）
- 不允許：用 0 代替缺資料
